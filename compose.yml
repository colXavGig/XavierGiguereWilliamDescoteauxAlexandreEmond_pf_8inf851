services:
  api-bwdev:
    container_name: analyse_proj
    image: analyse_proj
    restart: unless-stopped
    build: 
      tags:
        - "analyse_proj"
      context: .
      dockerfile: dockerfile
  
    networks:
      - bwdev
    ports:
      - 8000:8000
    labels:
        traefik.enable: true
        traefik.docker.network: "bwdev"
        # https router
        traefik.http.routers.api-bwdev.entrypoints: "websecure, wan-websecure"
        traefik.http.routers.api-bwdev.rule: "Host(`analyseproj.bwdev.dev`)"
        traefik.http.routers.api-bwdev.tls: true
        traefik.http.routers.api-bwdev.tls.certresolver: "cloudflare"
        traefik.http.routers.api-bwdev.service: api-bwdev
        
        # service
        traefik.http.services.api-bwdev.loadbalancer.server.port: 8000
        traefik.http.services.api-bwdev.loadbalancer.server.scheme: "http"